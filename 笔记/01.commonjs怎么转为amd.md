---

# CommonJS 怎么导入
## 转为 AMD 格式

## 安装依赖
```bash
npm install --save-dev gulp gulp-require-convert
```

## `package.json`
```json
"devDependencies": {
  "gulp": "^5.0.0",
  "gulp-require-convert": "^0.0.1"
}
```

## `gulpfile.js`
```javascript
const gulp = require('gulp');
const requireConvert = require('gulp-require-convert');

gulp.task('convert', function() {
  return gulp.src('commonjs/**/*.js') // 匹配 commonjs 文件夹中的所有 .js 文件
    .pipe(requireConvert('amd'))      // 转换为 AMD 格式
    .pipe(gulp.dest('output'));       // 输出到 output 文件夹
});

// 定义默认任务
gulp.task('default', gulp.series('convert'));
```

## 操作步骤
1. **把 CommonJS 的文件放到 `commonjs` 文件夹中**。
2. 在命令行中运行以下命令启动 Gulp 任务：
   ```bash
   gulp
   ```

---


## CommonJS 中导入文件夹的几种情况和规则：

在 CommonJS 模块系统中，导入模块的方式主要依赖于 `require()` 函数。当涉及到文件夹时，CommonJS 会按照一定的规则解析路径并加载模块。以下是几种常见的情况和规则：

---

### **1. 文件夹中有 `index.js` 文件**
如果文件夹中包含一个 `index.js` 文件，那么可以直接通过文件夹的路径来导入模块。CommonJS 会自动查找并加载 `index.js` 文件。

#### 规则：
- **路径解析**：当 `require()` 的路径指向一个文件夹时，CommonJS 会查找该文件夹中的 `index.js` 文件。
- **加载内容**：`index.js` 文件的内容将被加载并返回。

---

### **2. 文件夹中没有 `index.js` 文件**
如果文件夹中没有 `index.js` 文件，CommonJS 不会自动加载其他文件。你需要明确指定文件夹中的具体文件路径来导入模块。

#### 规则：
- **路径解析**：如果文件夹中没有 `index.js`，`require()` 不会自动加载其他文件。
- **明确指定文件**：必须指定文件夹中的具体文件名，包括文件扩展名（如 `.js`）。

---

### **3. 文件夹中的文件被导出为模块集合**
如果你希望从文件夹中导入多个模块，但又不想手动指定每个文件，可以通过在 `index.js` 中手动导出这些模块来实现。

#### 规则：
- **手动导出**：在 `index.js` 中，可以手动导入文件夹中的其他文件，并将它们导出为一个对象。
- **按需导入**：通过 `index.js`，可以按需导入文件夹中的模块。

---

### **4. 文件夹中的文件被自动解析（非标准 CommonJS 行为）**
在某些环境中（如某些构建工具或框架），可能会支持自动解析文件夹中的文件，但这并不是 CommonJS 的标准行为。例如，某些工具可能会支持从文件夹中自动加载模块，但这需要额外的配置或工具支持。

#### 注意：
- **CommonJS 标准**：CommonJS 本身不支持自动解析文件夹中的文件。
- **工具支持**：某些工具（如 Webpack、Babel 等）可能会提供额外的解析规则，但这需要明确配置。

---

### **总结**
- 如果文件夹中有 `index.js`，可以通过文件夹路径直接导入。
- 如果文件夹中没有 `index.js`，必须明确指定文件夹中的具体文件路径。
- 可以通过在 `index.js` 中手动导出文件夹中的模块，实现按需导入。
- CommonJS 本身不支持自动解析文件夹中的文件，除非使用额外的工具或配置。

希望这些规则能帮助你更清楚地理解 CommonJS 的导入机制。



